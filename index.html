<!DOCTYPE html>
<html lang="pt-BR" style="scroll-behavior:smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TS PACKS - Cat√°logo Proibido</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; background-color: #0a0a0a; color: white; overflow-x: hidden; }
    .hero-video { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; }
    .card-modelo { background: #121212; border: 1px solid #333; border-radius: 15px; overflow: hidden; display: flex; flex-direction: column; transition: 0.3s; height: 100%; position: relative; }
    .card-modelo:hover { border-color: #ff0000; transform: translateY(-5px); }
    .foto-box { width: 100%; height: 350px; object-fit: cover; object-position: center top; cursor: pointer; }
    
    .badge-online { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); padding: 4px 10px; border-radius: 20px; display: flex; align-items: center; gap: 6px; z-index: 10; border: 1px solid rgba(34, 197, 94, 0.3); }
    .ponto-verde { width: 8px; height: 8px; background: #22c55e; border-radius: 50%; box-shadow: 0 0 10px #22c55e; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

    .selo-vip-tag { position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #facc15, #eab308); color: black; font-size: 10px; font-weight: 900; padding: 4px 10px; border-radius: 5px; z-index: 10; box-shadow: 0 0 15px rgba(234, 179, 8, 0.4); text-transform: uppercase; border: 1px solid rgba(255,255,255,0.2); }

    .tag-venda-verde { background-color: #22c55e; color: black; font-size: 10px; font-weight: 900; text-transform: uppercase; padding: 4px 12px; border-radius: 6px; display: inline-block; margin-bottom: 8px; width: fit-content; }

    .stats-bar { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: #1a1a1a; border-bottom: 1px solid #333; }
    .stat-views { font-size: 12px; font-weight: 800; color: #fff; display: flex; align-items: center; gap: 6px; }
    
    .like-btn { cursor: pointer; transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1); background: rgba(255, 255, 255, 0.05); color: #fff; padding: 6px 16px; border-radius: 100px; font-weight: 900; font-size: 13px; display: flex; align-items: center; gap: 8px; border: 1px solid rgba(212, 175, 55, 0.4); backdrop-filter: blur(5px); }
    .like-btn:hover { transform: scale(1.05); border-color: #d4af37; background: rgba(212, 175, 55, 0.1); }
    .like-btn.voted { background: linear-gradient(135deg, #d4af37 0%, #f9f295 50%, #b8860b 100%); color: #000; border-color: #d4af37; box-shadow: 0 0 15px rgba(212, 175, 55, 0.6); cursor: default; }
    
    .news-wrapper { max-width: 1200px; margin: -30px auto 40px; position: relative; z-index: 30; padding: 0 20px; }
    .news-card { background: #1a1a1a; border-left: 4px solid #ff0000; border-radius: 8px; padding: 12px 20px; display: flex; align-items: center; gap: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    .news-badge { background: #ff0000; color: #fff; font-size: 10px; font-weight: 900; padding: 2px 8px; border-radius: 3px; text-transform: uppercase; }

    .tag-rosa { border: 1px solid #ff007f; color: #ff007f; font-size: 10px; padding: 2px 10px; border-radius: 20px; background: rgba(255, 0, 127, 0.1); text-transform: uppercase; font-weight: bold; width: fit-content; }
    .descricao-texto { font-size: 13px; color: #a3a3a3; line-height: 1.5; margin-top: 10px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
    .btn-whats { background-color: #25d366; color: white; text-align: center; padding: 12px; font-weight: 800; border-radius: 10px; margin-top: auto; text-transform: uppercase; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; }
    
    .timer-box { background: linear-gradient(90deg, #ff000022, transparent); border-left: 4px solid #ff0000; padding: 10px 20px; border-radius: 0 10px 10px 0; display: inline-block; }
    .btn-grupo-fixo { position: fixed; bottom: 24px; left: 24px; z-index: 100; background: #25d366; color: white; padding: 12px 20px; border-radius: 50px; font-weight: 900; font-size: 10px; text-transform: uppercase; display: flex; align-items: center; gap: 8px; box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4); transition: 0.3s; border: 2px solid rgba(255,255,255,0.1); }
    .btn-brilho-verde { position: relative; overflow: hidden; }
    .btn-brilho-verde::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent); transform: rotate(45deg); transition: 0.5s; animation: sweep 3s infinite; }
    @keyframes sweep { 0% { left: -120%; } 100% { left: 120%; } }

    /* NOVIDADE: ESTILOS DO FILTRO */
    .filter-section { background: #0a0a0a; padding: 40px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .filter-container { max-width: 600px; margin: 0 auto; padding: 0 20px; }
    .search-bar { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 15px; color: white; outline: none; transition: 0.3s; text-align: center; }
    .search-bar:focus { border-color: #ff0000; background: rgba(255,255,255,0.1); }
    .pills-box { display: flex; gap: 10px; justify-content: center; margin-top: 15px; overflow-x: auto; padding-bottom: 10px; }
    .pill-btn { background: #1a1a1a; border: 1px solid #333; padding: 8px 18px; border-radius: 50px; font-size: 11px; font-weight: 800; text-transform: uppercase; cursor: pointer; transition: 0.3s; white-space: nowrap; color: #666; }
    .pill-btn.active { background: #ff0000; border-color: #ff0000; color: white; box-shadow: 0 0 15px rgba(255,0,0,0.3); }
  </style>
</head>
<body>

<a href="https://chat.whatsapp.com/JY8D67Io1wOBoTJV9Sopmj" target="_blank" class="btn-grupo-fixo">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="18" style="filter: brightness(0) invert(1);">
    GRUPO OFICIAL
</a>

<header class="fixed w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/5">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-black italic uppercase tracking-tighter">TS<span class="text-red-600">PACKS</span></h1>
    <nav class="flex gap-3 md:gap-6 text-[9px] md:text-[11px] font-bold uppercase tracking-widest items-center">
      <a href="modelos.html" class="hover:text-red-600 transition">Modelos</a>
      <a href="registrar.html" class="border border-red-600 text-red-600 px-3 py-1 rounded hover:bg-red-600 hover:text-white transition uppercase font-black">Cadastro</a>
      <a href="login-modelo.html" class="bg-white/10 px-3 py-1 rounded transition text-white hover:bg-white/20">Login Modelos</a>
      <a href="login.html" class="bg-white/5 hover:bg-white/10 px-3 py-1 rounded transition text-neutral-400">ADM</a>
    </nav>
  </div>
</header>

<section id="inicio" class="relative min-h-screen flex items-center justify-center text-center">
  <video autoplay muted loop playsinline class="hero-video"><source src="cris.mp4" type="video/mp4"></video>
  <div class="absolute inset-0 bg-black/70"></div>
  <div class="relative z-10 px-6">
    <h2 class="text-6xl md:text-9xl font-black mb-2 italic uppercase leading-none tracking-tighter">TS<span class="text-red-600">PACKS</span></h2>
    <p class="text-neutral-300 mb-8 italic text-xs md:text-lg font-bold uppercase tracking-[0.6em]">CAT√ÅLOGO PROIBIDO ‚Ä¢ ACESSO RESTRITO</p>
    <a href="#ranking" class="bg-red-600 text-white px-12 py-4 rounded-xl font-black uppercase text-sm hover:bg-red-700 transition tracking-widest shadow-lg shadow-red-600/40">Acessar Cat√°logo</a>
  </div>
</section>

<section class="filter-section">
    <div class="filter-container">
        <input type="text" id="input-busca" class="search-bar" placeholder="Buscar modelo pelo nome..." onkeyup="filtrarModelosLocal()">
        <div class="pills-box">
            <button onclick="setFiltro('todos', this)" class="pill-btn active">Todas</button>
            <button onclick="setFiltro('vip', this)" class="pill-btn">Modelos VIP</button>
            <button onclick="setFiltro('novas', this)" class="pill-btn">Recentes</button>
        </div>
    </div>
</section>

<div class="news-wrapper" id="container-noticias" style="display: none;">
    <div class="news-card">
        <span class="news-badge">Aviso</span>
        <div id="texto-noticia" class="text-sm font-bold tracking-tight text-neutral-200"></div>
    </div>
</div>

<section class="max-w-6xl mx-auto px-6 py-24 border-b border-white/5">
    <div class="grid md:grid-cols-2 gap-16 items-center">
        <div>
            <span class="text-red-600 font-black uppercase text-[10px] tracking-[0.4em] mb-4 block">Nossa Trajet√≥ria</span>
            <h3 class="text-4xl font-black italic uppercase mb-8 tracking-tighter">No Mercado desde <span class="text-red-600">2022</span></h3>
            <div class="space-y-6">
                <p class="text-neutral-400 text-sm font-light leading-relaxed">A <strong>TS PACKS</strong> consolidou sua marca atrav√©s da confian√ßa. Evolu√≠mos de grupos de WhatsApp para a plataforma l√≠der hoje.</p>
                <div class="border-l-2 border-red-600 pl-4">
                    <p class="text-neutral-200 text-xs font-bold uppercase tracking-wider">Taxa VIP √önica: R$ 20,00</p>
                </div>
            </div>
        </div>
        <a href="https://chat.whatsapp.com/JY8D67Io1wOBoTJV9Sopmj" target="_blank" class="btn-brilho-verde bg-green-600 hover:bg-green-700 text-white p-5 rounded-2xl flex items-center justify-center gap-4 transition shadow-xl">
            <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="24" style="filter: brightness(0) invert(1);">
            <div class="text-left"><p class="text-[10px] font-black uppercase opacity-80 leading-none">Comunidade Oficial</p><p class="text-lg font-black uppercase italic leading-tight">ENTRAR NO GRUPO</p></div>
        </a>
    </div>

    <div class="mt-20 grid md:grid-cols-2 gap-12 bg-neutral-900/30 p-8 rounded-3xl border border-white/5">
        <div>
            <h4 class="text-red-600 font-black uppercase text-xs mb-4 tracking-widest">Aviso de Investimento</h4>
            <p class="text-neutral-400 text-xs leading-relaxed font-medium italic">
                Para manter a integridade e exclusividade da plataforma, aplicamos uma taxa de investimento √∫nico de <strong>R$ 20,00</strong> para novos perfis. Valor revertido em manuten√ß√£o e tr√°fego pago.
            </p>
        </div>
        <div>
            <h4 class="text-neutral-400 font-black uppercase text-xs mb-4 tracking-widest underline">Termos e Condi√ß√µes</h4>
            <p class="text-neutral-500 text-[10px] leading-relaxed uppercase">
                Ao utilizar a <strong>TS PACKS</strong>, voc√™ declara ser maior de 18 anos. Atuamos estritamente como uma plataforma de an√∫ncios independentes.
            </p>
        </div>
    </div>
</section>

<section id="ranking" class="max-w-7xl mx-auto px-6 py-20 text-center">
  <div class="mb-12">
      <h3 class="text-3xl font-black italic uppercase mb-4 tracking-tighter"><span class="text-red-600">RANKING</span> DA SEMANA</h3>
      <div class="timer-box">
          <p class="text-[9px] uppercase font-black tracking-[0.3em] text-neutral-500 mb-1">Pr√≥xima Atualiza√ß√£o:</p>
          <div id="countdown-timer" class="text-xl font-mono font-bold text-red-600 italic">00:00:00</div>
      </div>
  </div>
  <div id="vitrine-ranking" class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left"></div>
</section>

<section id="vip" class="max-w-7xl mx-auto px-6 py-20 border-t border-white/5 text-center bg-red-600/[0.02]">
  <h3 class="text-2xl font-black italic uppercase text-neutral-400 tracking-widest mb-12">CAT√ÅLOGO <span class="text-red-600">COMPLETO</span></h3>
  <div id="vitrine-vip" class="grid sm:grid-cols-2 md:grid-cols-4 gap-6 text-left"></div>
</section>

<footer class="bg-neutral-900/50 border-t border-white/10 py-16 mt-20">
    <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-3 gap-12 items-center text-center md:text-left">
        <div>
            <h4 class="text-2xl font-black italic mb-4 uppercase">TS<span class="text-red-600">PACKS</span></h4>
            <p class="text-neutral-500 text-[9px] leading-relaxed uppercase font-bold tracking-tighter italic">Plataforma de an√∫ncios independentes. Operando desde os grupos de WhatsApp em 2022.</p>
        </div>
        <div class="flex flex-col items-center">
            <div id="contador-global" class="text-3xl font-mono font-bold text-red-600 bg-red-600/5 px-6 py-2 rounded-lg border border-red-600/20 mb-2">000000</div>
            <p class="text-[9px] text-neutral-600 font-bold uppercase tracking-widest">Acessos Reais</p>
        </div>
        <div class="text-[11px] text-neutral-500 font-bold space-y-3 uppercase tracking-widest md:text-right">
            <a href="https://wa.me/5571984373174" target="_blank" class="inline-flex items-center gap-2 bg-red-600/10 border border-red-600/30 text-white px-4 py-2 rounded-lg font-black hover:bg-red-600 transition"><span class="text-red-600">üí¨</span> SUPORTE OFICIAL TS</a>
            <p class="text-[10px] text-neutral-700 font-black uppercase tracking-[0.2em] mt-4">¬© 2026 TS PACKS</p>
        </div>
    </div>
</footer>

<script>
  const _supabase = supabase.createClient('https://ezcdhydjxielfhjqgblk.supabase.co', 'sb_publishable__ACUqgBDxQZIqCzY13LyKQ__IgrksjW');
  
  // NOVIDADE: VARI√ÅVEIS DE ESTADO
  let todasModelos = [];
  let filtroAtivo = 'todos';

  async function carregarNoticias() {
      const { data } = await _supabase.from('noticias').select('*').order('id', { ascending: false }).limit(1);
      if (data && data.length > 0) {
          const n = data[0];
          document.getElementById('container-noticias').style.display = 'block';
          document.getElementById('texto-noticia').innerHTML = `<span class="${n.destaque ? 'text-red-600' : 'text-red-400'} uppercase">${n.titulo}:</span> ${n.conteudo}`;
      }
  }

  // NOVIDADE: FUN√á√ÉO DE FILTRAGEM MELHORADA
  function setFiltro(tipo, btn) {
      filtroAtivo = tipo;
      document.querySelectorAll('.pill-btn').forEach(p => p.classList.remove('active'));
      btn.classList.add('active');
      filtrarModelosLocal();
  }

  function filtrarModelosLocal() {
      const termo = document.getElementById('input-busca').value.toLowerCase();
      
      const filtradas = todasModelos.filter(m => {
          const matchNome = m.nome.toLowerCase().includes(termo);
          let matchFiltro = true;
          if (filtroAtivo === 'vip') matchFiltro = m.vip === true;
          if (filtroAtivo === 'novas') matchFiltro = m.vip === false; // Ou use l√≥gica de data se tiver
          return matchNome && matchFiltro;
      });

      // Atualiza vitrine mantendo o ranking original
      document.getElementById('vitrine-vip').innerHTML = filtradas.map(m => criarCard(m, false)).join('');
  }

  async function carregarModelos() {
    const { data } = await _supabase.from('modelos').select('*').eq('aprovado', true).order('likes', { ascending: false });
    if (data) {
        todasModelos = data; // Armazena localmente para busca r√°pida
        const rankingData = data.filter(m => (m.likes || 0) > 0).slice(0, 3);
        document.getElementById('vitrine-ranking').innerHTML = rankingData.map((m, index) => criarCard(m, true, index + 1)).join('');
        
        // Carrega vitrine completa inicialmente
        filtrarModelosLocal();
    }
  }

  const criarCard = (m, isRank, posicao) => {
      let jaCurtiu = JSON.parse(localStorage.getItem('ts_likes') || "[]").includes(m.id);
      const numeroLimpo = m.whatsapp?.replace(/\D/g, '');
      const msg = encodeURIComponent(`Ol√° ${m.nome}, vim pela TS PACKS e gostaria de solicitar a sua tabela de conte√∫do!`);
      const linkWhats = `https://wa.me/55${numeroLimpo}?text=${msg}`;

      return `
      <div class="card-modelo ${isRank ? 'border-red-600/40' : ''}">
        ${isRank ? `<div class="absolute top-4 right-4 bg-red-600 text-white font-black px-3 py-1 rounded-full text-[10px] z-20 italic">#${posicao}¬∫</div>` : ''}
        ${m.vip ? `<div class="selo-vip-tag">‚≠ê VIP</div>` : ''}
        <div class="badge-online"><div class="ponto-verde"></div><span class="text-[8px] font-black uppercase text-white">Online</span></div>
        <div onclick="registrarView('${m.id}', ${m.views || 0}, '${linkWhats}')" class="cursor-pointer"><img src="${m.foto_url}" class="foto-box"></div>
        <div class="stats-bar">
            <div class="stat-views">üëÅÔ∏è ${m.views || 0}</div>
            <button onclick="curtir('${m.id}', ${m.likes || 0})" class="like-btn ${jaCurtiu ? 'voted' : ''}"> 
                <span>${jaCurtiu ? '‚ù§Ô∏è' : 'ü§ç'}</span> 
                <span class="tracking-widest">${m.likes || 0}</span> 
            </button>
        </div>
        <div class="p-5 flex-1 flex flex-col">
          <div class="tag-venda-verde">Dispon√≠vel para Vendas</div>
          <h4 class="text-2xl font-black uppercase italic ${m.vip ? 'text-yellow-500' : 'text-white'} tracking-tighter">${m.nome}</h4>
          <div class="flex mt-3 mb-3"><span class="tag-rosa">Verificada TS</span></div>
          <p class="descricao-texto mb-6 font-light">${m.descricao || ''}</p>
          <button onclick="registrarView('${m.id}', ${m.views || 0}, '${linkWhats}')" class="btn-whats">SOLICITAR CONTE√öDO</button>
        </div>
      </div>`;
  };

  async function curtir(id, likes) {
      let curtidas = JSON.parse(localStorage.getItem('ts_likes') || "[]");
      if (curtidas.includes(id)) return;
      await _supabase.from('modelos').update({ likes: (Number(likes) || 0) + 1 }).eq('id', id);
      curtidas.push(id); localStorage.setItem('ts_likes', JSON.stringify(curtidas));
      carregarModelos();
  }

  async function registrarView(id, views, link) { 
      await _supabase.from('modelos').update({ views: (Number(views) || 0) + 1 }).eq('id', id); 
      window.open(link, '_blank');
      carregarModelos();
  }

  async function gerenciarVisitas() {
    let { data: stats } = await _supabase.from('stats').select('total_visitas').eq('id', 1).single();
    let novo = (Number(stats?.total_visitas) || 0) + 1;
    await _supabase.from('stats').update({ total_visitas: novo }).eq('id', 1);
    document.getElementById('contador-global').innerText = novo.toString().padStart(6, '0');
  }

  async function gerenciarReset() {
      const { data: config } = await _supabase.from('stats').select('ultimo_reset').eq('id', 1).single();
      if (!config) return;
      const agora = new Date().getTime();
      const dataReset = new Date(config.ultimo_reset).getTime() + (3 * 24 * 60 * 60 * 1000);
      const restante = dataReset - agora;
      if (restante <= 0) {
          await _supabase.from('modelos').update({ likes: 0, views: 0 }).eq('aprovado', true);
          await _supabase.from('stats').update({ ultimo_reset: new Date().toISOString() }).eq('id', 1);
          location.reload();
      } else {
          const h = Math.floor(restante / (1000 * 60 * 60));
          const m = Math.floor((restante % (1000 * 60 * 60)) / (1000 * 60));
          const s = Math.floor((restante % (1000 * 60)) / 1000);
          document.getElementById('countdown-timer').innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
      }
  }

  carregarNoticias(); carregarModelos(); gerenciarVisitas(); setInterval(gerenciarReset, 1000);
</script>
</body>
</html>