<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cadastro ‚Ä¢ TS Packs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>body { font-family: 'Poppins', sans-serif; }</style>
</head>
<body class="bg-neutral-950 text-white flex items-center justify-center min-h-screen px-6 py-10">
<div class="w-full max-w-md bg-gradient-to-b from-neutral-900 to-black border border-neutral-800 rounded-2xl p-8 shadow-2xl">
  <h1 class="text-center text-2xl font-extrabold tracking-widest mb-2 italic">TS<span class="text-red-600">PACKS</span></h1>
  <p class="text-center text-neutral-400 text-sm mb-6 uppercase tracking-tighter">Envie sua solicita√ß√£o para an√°lise</p>

  <div class="bg-yellow-400/10 border border-yellow-400/30 rounded-xl p-4 mb-4 text-sm">
    <p class="font-bold text-yellow-400 mb-1">‚≠ê √ÅREA VIP</p>
    <p class="text-neutral-300">Modelos VIP ficam em destaque. Valor: <strong>R$ 20,00</strong>.</p>
  </div>

  <div class="border border-green-500/40 bg-green-500/10 rounded-xl p-5 mb-6 text-center">
    <a href="https://wa.me/5571984373174?text=Oi%2C+paguei+o+VIP." target="_blank" class="flex items-center justify-center gap-3 bg-green-600 hover:bg-green-700 py-4 rounded-xl font-extrabold tracking-widest text-lg transition shadow-lg">üí∞ PAGAR VIP NO WHATSAPP</a>
  </div>

  <div class="space-y-4">
    <input id="nome" placeholder="Nome art√≠stico" class="w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:border-red-600">
    <input id="telefone" placeholder="Seu WhatsApp (Ex: 719...)" class="w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:border-red-600">
    <input id="idade" type="number" placeholder="Sua Idade" class="w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:border-red-600">
    
    <input id="instagram" placeholder="Link do Instagram (Opcional)" class="w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:border-pink-500">

    <textarea id="descricao" rows="3" placeholder="Descri√ß√£o / Tabela de Pre√ßos" class="w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 focus:outline-none focus:border-red-600 resize-none"></textarea>

    <label class="flex items-center gap-3 text-sm cursor-pointer bg-neutral-900/50 p-3 rounded-xl border border-neutral-800">
      <input id="vip" type="checkbox" checked class="accent-yellow-400 w-5 h-5"> Quero ser <span class="text-yellow-400 font-bold uppercase ml-1">Modelo VIP</span>
    </label>

    <div>
      <p class="text-xs uppercase tracking-widest text-neutral-400 mb-2 font-bold">Foto principal</p>
      <label class="flex items-center gap-4 cursor-pointer">
        <span class="bg-red-600 hover:bg-red-700 px-5 py-2 rounded-full font-bold text-sm transition">Escolher arquivo</span>
        <span id="fileName1" class="text-sm text-neutral-400 truncate">Nenhum selecionado</span>
        <input id="foto1" type="file" accept="image/*" class="hidden">
      </label>
    </div>

    <button onclick="enviar()" class="w-full mt-6 bg-red-600 hover:bg-red-700 py-4 rounded-xl font-extrabold tracking-widest transition shadow-lg shadow-red-900/20">ENVIAR SOLICITA√á√ÉO</button>
    <div id="msg" class="text-center text-sm mt-4 font-bold"></div>
  </div>
</div>

<script>
const _supabase = supabase.createClient('https://ezcdhydjxielfhjqgblk.supabase.co', 'sb_publishable__ACUqgBDxQZIqCzY13LyKQ__IgrksjW');
const foto1 = document.getElementById('foto1');
const fileName1 = document.getElementById('fileName1');
foto1.onchange = () => fileName1.textContent = foto1.files[0]?.name || 'Nenhum selecionado';

async function enviar() {
  const nome = document.getElementById('nome').value.trim();
  const telefone = document.getElementById('telefone').value.trim();
  const idade = document.getElementById('idade').value;
  const instagram = document.getElementById('instagram').value.trim() || null;
  const descricao = document.getElementById('descricao').value.trim();
  const isVip = document.getElementById('vip').checked;
  const f1 = foto1.files[0];
  const msg = document.getElementById('msg');

  if (!nome || !telefone || !idade || !f1) {
    msg.innerHTML = '<span class="text-red-500 text-xs">Preencha os campos obrigat√≥rios!</span>';
    return;
  }

  msg.innerHTML = '<span class="text-neutral-400 animate-pulse">Enviando...</span>';

  try {
    const nomeArquivo = `${Date.now()}_${f1.name}`;
    await _supabase.storage.from('fotos-modelos').upload(nomeArquivo, f1);
    const { data: { publicUrl } } = _supabase.storage.from('fotos-modelos').getPublicUrl(nomeArquivo);

    await _supabase.from('modelos').insert([{
      nome: nome, 
      whatsapp: telefone, 
      idade: idade, 
      descricao: descricao,
      instagram: instagram, 
      twitter: null, // Deixando nulo j√° que removemos o campo
      foto_url: publicUrl, 
      vip: isVip, 
      aprovado: false, 
      likes: 0, 
      views: 0, 
      clicks: 0
    }]);

    msg.innerHTML = '<span class="text-green-400 uppercase text-xs">Sucesso! Cadastro enviado.</span>';
    ['nome', 'telefone', 'idade', 'descricao', 'instagram'].forEach(id => document.getElementById(id).value = "");
    fileName1.textContent = "Nenhum selecionado";
  } catch (e) {
    msg.innerHTML = '<span class="text-red-500 text-xs font-black">ERRO AO ENVIAR</span>';
  }
}
</script>
</body>
</html>