<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login ADM - TS Packs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body class="bg-neutral-950 text-white font-[Poppins] flex items-center justify-center min-h-screen p-6">

  <div class="w-full max-w-sm bg-neutral-900 border border-neutral-800 p-8 rounded-2xl shadow-2xl">
    <h1 class="text-2xl font-black italic text-center mb-6 uppercase tracking-widest">
      TS<span class="text-red-600">PACKS</span> <span class="text-sm block text-neutral-500 not-italic">Painel Administrativo</span>
    </h1>
    
    <div class="space-y-4">
      <div>
        <label class="text-[10px] uppercase font-bold text-neutral-500 ml-1">E-mail</label>
        <input id="email" type="email" placeholder="admin@tspacks.com" class="w-full bg-black border border-neutral-700 p-3 rounded-lg focus:border-red-600 outline-none transition">
      </div>
      <div>
        <label class="text-[10px] uppercase font-bold text-neutral-500 ml-1">Senha</label>
        <input id="senha" type="password" placeholder="••••••••" class="w-full bg-black border border-neutral-700 p-3 rounded-lg focus:border-red-600 outline-none transition">
      </div>
      <button onclick="logar()" id="btnLogin" class="w-full bg-red-600 hover:bg-red-700 py-4 rounded-lg font-bold uppercase tracking-widest transition shadow-lg shadow-red-900/20">
        Entrar no Painel
      </button>
    </div>
    <p id="erro" class="text-red-500 text-[10px] mt-4 text-center uppercase font-bold tracking-tighter"></p>
  </div>

  <script>
    // Configuração com a sua URL e Key Anon
    const _supabase = supabase.createClient('https://ezcdhydjxielfhjqgblk.supabase.co', 'sb_publishable__ACUqgBDxQZIqCzY13LyKQ__IgrksjW');

    async function logar() {
      const email = document.getElementById('email').value.trim();
      const senha = document.getElementById('senha').value;
      const btn = document.getElementById('btnLogin');
      const erroMsg = document.getElementById('erro');

      if(!email || !senha) {
          erroMsg.innerText = "Preencha todos os campos.";
          return;
      }

      btn.disabled = true;
      btn.innerText = "VERIFICANDO...";
      erroMsg.innerText = "";

      try {
        const { data, error } = await _supabase.auth.signInWithPassword({ 
            email: email, 
            password: senha 
        });

        if (error) throw error;

        // Sucesso: Redireciona para o admin
        window.location.href = "admin.html";

      } catch (error) {
        erroMsg.innerText = "ACESSO NEGADO: " + error.message;
        btn.disabled = false;
        btn.innerText = "Entrar no Painel";
      }
    }

    // Permite dar 'Enter' para logar
    document.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') logar();
    });
  </script>
</body>
</html>